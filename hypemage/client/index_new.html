<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Robot Dashboard</title>
    
    <!-- Vue.js for reactive UI -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js"></script>
    
    <!-- Chart.js for graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom styles -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- Top Navigation -->
        <header class="header">
            <h1>ðŸ¤– Multi-Robot Dashboard</h1>
            <div class="connection-badges">
                <span :class="['badge', storm.connected ? 'connected' : 'disconnected']">
                    Storm {{ storm.connected ? 'âœ“' : 'âœ—' }}
                </span>
                <span :class="['badge', necron.connected ? 'connected' : 'disconnected']">
                    Necron {{ necron.connected ? 'âœ“' : 'âœ—' }}
                </span>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Both View (side by side) -->
            <div v-if="currentView === 'both'" class="both-view">
                <div class="robot-column">
                    <h2 class="robot-title">âš¡ Storm</h2>
                    <robot-widgets 
                        :robot="storm" 
                        :visible-widgets="storm.visibleWidgets"
                        @toggle-widget="toggleWidget('storm', $event)">
                    </robot-widgets>
                </div>
                <div class="robot-column">
                    <h2 class="robot-title">ðŸ’€ Necron</h2>
                    <robot-widgets 
                        :robot="necron" 
                        :visible-widgets="necron.visibleWidgets"
                        @toggle-widget="toggleWidget('necron', $event)">
                    </robot-widgets>
                </div>
            </div>

            <!-- Single Robot View (Storm) -->
            <div v-if="currentView === 'storm'" class="single-view">
                <h2 class="robot-title">âš¡ Storm - Detailed View</h2>
                <robot-widgets 
                    :robot="storm" 
                    :visible-widgets="storm.visibleWidgets"
                    :expanded="true"
                    @toggle-widget="toggleWidget('storm', $event)">
                </robot-widgets>
            </div>

            <!-- Single Robot View (Necron) -->
            <div v-if="currentView === 'necron'" class="single-view">
                <h2 class="robot-title">ðŸ’€ Necron - Detailed View</h2>
                <robot-widgets 
                    :robot="necron" 
                    :visible-widgets="necron.visibleWidgets"
                    :expanded="true"
                    @toggle-widget="toggleWidget('necron', $event)">
                </robot-widgets>
            </div>
        </main>

        <!-- Bottom Navigation & Widget Toggles -->
        <footer class="footer">
            <div class="view-switcher">
                <button 
                    :class="['view-btn', {active: currentView === 'both'}]"
                    @click="currentView = 'both'">
                    Both
                </button>
                <button 
                    :class="['view-btn', {active: currentView === 'storm'}]"
                    @click="currentView = 'storm'">
                    Storm
                </button>
                <button 
                    :class="['view-btn', {active: currentView === 'necron'}]"
                    @click="currentView = 'necron'">
                    Necron
                </button>
            </div>

            <div class="widget-toggles">
                <span class="toggle-label">Show:</span>
                <label v-for="widget in availableWidgets" :key="widget.id" class="toggle">
                    <input 
                        type="checkbox" 
                        :checked="isWidgetVisible(currentView, widget.id)"
                        @change="toggleWidgetForCurrentView(widget.id)">
                    <span>{{ widget.name }}</span>
                </label>
            </div>
        </footer>
    </div>

    <!-- Import modular components and app logic -->
    <script src="components/widgets.js"></script>
    <script src="components/robot-connection.js"></script>
    <script src="app.js"></script>
</body>
</html>
